<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-4">
      <form [formGroup]="createAdForm" (ngSubmit)="createAd()">
        <h2 class="text-center text-primary">Добави обява</h2>
        <hr>
        <!-- title -->
        <div class="form-group">
          <input type="text" 
            [ngClass]="{'is-invalid': createAdForm.get('title').errors 
              && createAdForm.get('title').touched}"
            class="form-control" 
            formControlName="title" 
            placeholder="Заглавие на обявата">
          <div class="invalid-feedback" 
            *ngIf="createAdForm.get('title').hasError('required') 
              && createAdForm.get('title').touched">
              Заглавието е задължително
          </div>
          <div class="invalid-feedback" *ngIf="createAdForm.get('title').hasError('minlength') && createAdForm.get('title').touched">
            Заглавието трябва да бъде поне 3 символа
          </div>
          <div class="invalid-feedback" *ngIf="createAdForm.get('title').hasError('maxlength') && createAdForm.get('title').touched">
            Заглавието не трябва да надвишава 50 символа
          </div>
        </div>
        <!-- category -->
        <div class="form-group">
          <select class="custom-select" (change)="selectCategory($event)" formControlName="categoryId" [ngClass]="{'is-invalid': createAdForm.get('categoryId').errors && createAdForm.get('categoryId').touched}">
            <option value="" disabled>Избери категория</option>
            <option *ngFor="let category of categories" [ngValue]="category.id">{{category.name}}</option>
          </select>
          <div class="invalid-feedback" *ngIf="createAdForm.get('categoryId').hasError('required')">
            Категорията е задължителна
          </div>
        </div>
        <!-- condition -->
        <!--
        <div class="form-group">
          <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" formControlName="isUsed" id="defaultUnchecked">
            <label class="custom-control-label" for="defaultUnchecked">Is Used</label>
          </div>
        </div>
        -->
        <div class="form-group">
          <select class="custom-select" (change)="selectCondition($event)" formControlName="isUsed" [ngClass]="{'is-invalid': createAdForm.get('isUsed').errors && createAdForm.get('isUsed').touched}">
            <option [value]=null>Избери състояние</option> <!--disabled-->
            <option [value]="true">използвано</option>
            <option [value]="false">ново</option>
          </select>
          <div class="invalid-feedback" *ngIf="createAdForm.get('isUsed').hasError('required')">
            Състоянието е задължително
          </div>
        </div>
        <!-- price -->
        <div class="form-group">
          <input type="number"
            [ngClass]="{'is-invalid': createAdForm.get('price').errors 
              && createAdForm.get('price').touched
              || createAdForm.get('price').touched
              && createAdForm.hasError('mismatch')}"
            class="form-control" 
            formControlName="price" 
            placeholder="Цена">
          <!--
          <div class="invalid-feedback" 
            *ngIf="createAdForm.get('price').hasError('required') 
              && createAdForm.get('price').touched">
              Цената е задължителна
          </div>-->
          <div class="invalid-feedback" 
            *ngIf="createAdForm.hasError('mismatch') 
              && createAdForm.get('price').touched">
              Цената трябва да бъде положително число
          </div>
        </div>
        <!-- location -->
        <div class="form-group">
          <input type="text" 
            [ngClass]="{'is-invalid': createAdForm.get('location').errors 
              && createAdForm.get('location').touched}"
            class="form-control" 
            formControlName="location" 
            placeholder="Адрес">
          <div class="invalid-feedback" 
            *ngIf="createAdForm.get('location').hasError('required') 
              && createAdForm.get('location').touched">
              Адресът е задължителен
          </div>
          <div class="invalid-feedback" *ngIf="createAdForm.get('location').hasError('minlength') && createAdForm.get('location').touched">
            Адресът трябва да бъде поне 3 символа
          </div>
          <div class="invalid-feedback" *ngIf="createAdForm.get('location').hasError('maxlength') && createAdForm.get('location').touched">
            Адресът не трябва да надвишава 35 символа
          </div>
        </div>
        <!-- descrition -->
        <div class="form-group">
          <textarea class="form-control" rows="4" formControlName="description" placeholder="Описание" [ngClass]="{'is-invalid': createAdForm.get('description').errors}"></textarea>
          <div class="invalid-feedback" *ngIf="createAdForm.get('description').hasError('maxlength')">
            Описанието не трябва да надвишава 1000 символа
          </div>
        </div>
        <div class="form-group text-center">
          <button class="btn btn-success" [disabled]="!createAdForm?.valid" type="submit">Добавяне на обява</button>
          <button class="btn btn-default" type="button" (click)="cancel()">Отказ</button>
        </div>
      </form>
    </div>
  </div>
</div>
